@inject YouTubeServiceHelper YouTubeServiceHelper
@page "/"

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.
<button class="btn btn-primary" @onclick="GetChannelMembers">Get Channel Members</button>

@if (members != null)
{
    <ul>
        @foreach (var member in members)
        {
            <li>@member.Snippet.MemberDetails.DisplayName</li>
        }
    </ul>
}

@code {
   private List<Google.Apis.YouTube.v3.Data.Member> members;

    private async Task GetChannelMembers()
    {
        try
        {
            Console.WriteLine("run  ListChannelMembersAsync");
            var result = await YouTubeServiceHelper.ListChannelMembersAsync();
            members = result.ToList();
        }
        catch (Exception ex)
        {
            Console.WriteLine("Error retrieving channel members: " + ex.Message);
        }
    }
}
